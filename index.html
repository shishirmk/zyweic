<!doctype html>
<html>
    <head>
        <!-- MISC/META -->
        <title>Zywiec - Time series segmentation playground </title>
        <meta charset="utf-8">
        <meta name="description" content="Zywiec - Time series segmentation playground ">
        <!-- CSS -->
        <link href="css/libs/bootstrap.css" rel="stylesheet">
        <link href="css/libs/rickshaw.css" rel="stylesheet">
        <link href="css/style.css" rel="stylesheet">
        <!-- LIBS -->
        <script src="js/libs/jquery.js"></script>
        <script src="js/libs/bootstrap.js"></script>
        <script src="js/libs/d3.min.js"></script>
        <script src="js/libs/d3.layout.min.js"></script>
        <script src="js/libs/rickshaw.js"></script>
    </head>
    <body>
        <div class="container">
            <!-- Static navbar -->
            <div class="navbar">
                <div class="container">
                    <div class="navbar-header">
                        <a class="navbar-brand" href="#">Zywiec - <small>Time series segmentation playground</small></a>
                    </div>
                    <div class="navbar-collapse collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li><a href="#about">About</a></li>            
                        </ul>
                    </div>
                </div>
            </div>
            <!-- Chart -->
            <style>
                #chart_container{
                    padding: 1% 1% 1% 1%;
                }   
            </style>
            <div id="chart_container" class="thumbnail">
                <div id="chart">
                </div>
            </div>
            <script type="text/javascript">
                $(document).ready( function() {
                    var seriesData = [ ];
                    var palette = new Rickshaw.Color.Palette();
                    for (var i = 0; i < 75; i++) {
                        seriesData.push( {
                            x: i,
                            y: Math.random()*100
                        } );
                    }
                    var seriesArray = [
                            {
                                name: 'Line Graph',
                                data: seriesData,
                                renderer: 'line',
                                color: palette.color()
                            },{
                                name: 'Scatter Plot',
                                data: seriesData,
                                color: palette.color(),
                                renderer: 'scatterplot'
                            }
                        ]
                    var graph = new Rickshaw.Graph( {
                        element: document.getElementById("chart"),
                        renderer: 'multi',
                        height: 300,
                        dotSize: 2,
                        series: seriesArray
                    } );
                    var xAxis = new Rickshaw.Graph.Axis.X( {
                        graph: graph,
                        format: Rickshaw.Fixtures.Number.formatKMBT
                    } );
                    var yAxis = new Rickshaw.Graph.Axis.Y( {
                        graph: graph,
                        format: Rickshaw.Fixtures.Number.formatKMBT
                    } );
                    graph.render();
                    $("#segment_button").click( function(e) {
                        e.preventDefault();
                        //Parse the JSON input by the user and make it a array so that it can be plotted
                        var inputArray = $.parseJSON($("#array_input").val());
                        var inputSeries = [];
                        for(var i in inputArray){
                            inputSeries.push({
                                x: inputArray[i][0],
                                y: inputArray[i][1]
                            })
                        }
                        seriesArray[0].data = inputSeries;
                        seriesArray[1].data = inputSeries;
                        graph.update();
                    } );
                } );
            </script>
            <!-- Notifications -->
            <div id="notification_area">
                <br/>
                <div class="alert alert-info">
                    <b>Info:</b> Showing segmentation of a random number series
                </div>
            </div>
            <!-- Array Input -->
            <div id="input_form">
                <form>
                    <textarea id="array_input" class="form-control" rows="6"  placeholder="Input Example: [ [1, 24.34], [2, 34.55] ]"></textarea><br/>
                    <button id="segment_button" type="button" class="btn btn-primary btn-lg">Segment it!</button>
                </form>
            </div>
            <!-- Cool Footer -->
            <div>
                <br/>
                <br/>
                <br/>
                <blockquote>
                    <p>
                        "People just want the highlights, except when they don't, in which case they want everything."
                    </p>
                    <small>
                        Source: A wise hackernews comment
                    </small>
                </blockquote>
            </div>
        </div>
    <!-- JS loading in footer -->
    </body>
</html>